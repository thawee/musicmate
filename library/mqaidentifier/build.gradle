//apply plugin: 'com.android.library'
plugins {
    alias(libs.plugins.android.library)
}
android {
    compileSdk = libs.versions.compileSdkVersion.get() as Integer
    buildToolsVersion = libs.versions.buildTools.get()

    defaultConfig {
        minSdk = libs.versions.minSdkVersion.get() as Integer
        targetSdk = libs.versions.targetSdkVersion.get() as Integer

        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
        consumerProguardFiles "consumer-rules.pro"
        externalNativeBuild {
            cmake {
                cppFlags ""
            }
        }

        ndk{
       //     moduleName "FLAC++"
            //noinspection ChromeOsAbiSupport
            abiFilters = ['arm64-v8a']
        }
    }

    buildTypes {
        release {
            minifyEnabled = false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
    sourceSets {
       // main {
       //     jniLibs.srcDir  'src/main/jniLibs'
       // }
    }
    externalNativeBuild {
        cmake {
            path = "src/main/cpp/CMakeLists.txt"
            //version "3.18.1"
            version = "3.31.1" //3.22.1"
        }
    }
    compileOptions {
        sourceCompatibility = JavaLanguageVersion.of(17)
        targetCompatibility = JavaLanguageVersion.of(17)
    }
    //ndkVersion '25.0.8775105'
    //ndkVersion '25.1.8937393'
    //ndkVersion '25.2.9519653'
    //ndkVersion '27.0.11718014'
    //ndkVersion = '27.0.12077973'
    ndkVersion = '28.0.12674087'
    namespace = 'apincer.android.mqaidentifier'
}

dependencies {
    implementation libs.kotlin.stdlib
    implementation libs.androidx.annotation
    implementation libs.jetbrains.annotations
    implementation libs.androidx.lifecycle.runtime
    implementation libs.androidx.lifecycle.process
    implementation libs.ffmpegkit.audio
    implementation libs.kotlin.stdlib
    testImplementation libs.junit
    androidTestImplementation libs.androidx.junit
    androidTestImplementation libs.androidx.espresso.core
}